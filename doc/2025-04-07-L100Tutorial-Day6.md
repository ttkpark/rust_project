ë¬¼ë¡ ì´ì•¼! ì§€ê¸ˆê¹Œì§€ í•˜ë‚˜í•˜ë‚˜ ë‹¨ë‹¨íˆ ìŒ“ì•„ì™”ê³ , ì´ì œ Day 6ì— ë„ë‹¬í–ˆì–´.  
ì´ì œ ìš°ë¦¬ê°€ ë§Œë“  **STM32 Rust í”„ë¡œì íŠ¸ë¥¼ ì™¸ë¶€ì™€ ì†Œí†µí•  ìˆ˜ ìˆê²Œ** ë§Œë“œëŠ” ì¤‘ìš”í•œ ë‹¨ê³„ â€” **UART í†µì‹ **ì„ ì‹œì‘í•  ì°¨ë¡€ì•¼. ğŸ¯

---

# ğŸ“ Rust ì„ë² ë””ë“œ êµìœ¡ê³¼ì • ì •ë¦¬ (ë³µìŠµ)

| Day | ì£¼ì œ | í•µì‹¬ ë‚´ìš© |
|-----|------|-----------|
| **Day 1** | Rust ì„ë² ë””ë“œ ê°œìš” | C ëŒ€ë¹„ ì¥ì , `no_std`, HAL ê°œë… |
| **Day 2** | ê°œë°œ í™˜ê²½ êµ¬ì¶• | Rust toolchain, `thumbv7m-none-eabi`, í”„ë¡œì íŠ¸ êµ¬ì¡° |
| **Day 3** | STM32 ë³´ë“œì™€ CubeMX | í•€ë§µ, í´ëŸ­ ì„¤ì •, `.ioc`ë¡œ ë³´ë“œ ì´í•´ |
| **Day 4** | ì²« Rust í”„ë¡œì íŠ¸ | `stm32f103-blinky`, PC13 LED Blink ì„±ê³µ |
| **Day 5** | ë©”ëª¨ë¦¬ì™€ ë§ì»¤ êµ¬ì¡° | `#[entry]`, `memory.x`, `no_main`, `no_std` ì„¤ëª… |
| **ğŸ‘‰ Day 6** | **UART í†µì‹  ì‹œì‘** | USART1ì„ í†µí•œ "Hello!" ì¶œë ¥ êµ¬í˜„ |

---

# ğŸ“¦ Day 6: UART í†µì‹  â€“ ë³´ë“œì—ì„œ ë©”ì‹œì§€ ì¶œë ¥í•˜ê¸°

## ğŸ¯ ì˜¤ëŠ˜ì˜ ëª©í‘œ

- UART(USART1) ì„¤ì •
- CP2102 USB-Serialì„ í†µí•´ PCì™€ í†µì‹ 
- ë³´ë“œì—ì„œ `"Hello, Rust!"` ì¶œë ¥ í™•ì¸

---

## âœ… 1. í•˜ë“œì›¨ì–´ êµ¬ì„± ë³µìŠµ

| í•­ëª© | ë‚´ìš© |
|------|------|
| ì¹©ì…‹ | STM32F103C8T6 |
| UART í•€ | USART1 â†’ TX: **PA9**, RX: **PA10** |
| í†µì‹  ì¹© | CP2102 â†’ USB to Serial |
| ì—°ê²° | ë³´ë“œì˜ PA9 â†’ CP2102ì˜ RXD / GND ì—°ê²° í•„ìš”

---

## âœ… 2. ì˜ì¡´ì„± ì¶”ê°€ (Cargo.toml)

```toml
[dependencies]
cortex-m = "0.7"
cortex-m-rt = "0.7"
panic-halt = "0.2"

stm32f1xx-hal = { version = "0.10.0", features = ["stm32f103", "rt"] }

embedded-hal = "1.0.0"     # ì§ê´€ì ì¸ HAL trait ì§€ì›
nb = "1.1.0"               # non-blocking trait (`nb::block!`)
```

---

## âœ… 3. UART ì½”ë“œ ì˜ˆì œ (`src/main.rs`)

```rust
#![no_std]
#![no_main]

use cortex_m_rt::entry;
use panic_halt as _;

use stm32f1xx_hal::{
    pac,
    prelude::*,
    serial::{Config, Serial},
};

use core::fmt::Write; // write! ë§¤í¬ë¡œë¥¼ ìœ„í•´ í•„ìš”
use nb::block;

#[entry]
fn main() -> ! {
    let dp = pac::Peripherals::take().unwrap();

    // í´ëŸ­ ì„¤ì •
    let mut flash = dp.FLASH.constrain();
    let mut rcc = dp.RCC.constrain();

    let clocks = rcc
        .cfgr
        .use_hse(8.mhz())
        .sysclk(72.mhz())
        .pclk1(36.mhz())
        .freeze(&mut flash.acr);

    // GPIO ì„¤ì •
    let mut afio = dp.AFIO.constrain();
    let mut gpioa = dp.GPIOA.split();

    // PA9 = TX, PA10 = RX
    let tx = gpioa.pa9.into_alternate_push_pull(&mut gpioa.crh);
    let rx = gpioa.pa10; // RXëŠ” ì•ˆ ì¨ë„ OK

    // ì‹œë¦¬ì–¼ í¬íŠ¸ ì„¤ì • (115200 8N1)
    let serial = Serial::usart1(
        dp.USART1,
        (tx, rx),
        &mut afio.mapr,
        Config::default().baudrate(115_200.bps()),
        &clocks,
    );

    let (mut tx, _rx) = serial.split();

    // ë©”ì‹œì§€ ì „ì†¡
    writeln!(tx, "Hello, Rust from STM32!").unwrap();

    loop {}
}
```

---

## âœ… 4. ì—…ë¡œë“œ ë° í…ŒìŠ¤íŠ¸

1. `cargo build --release`
2. `.bin` ìƒì„±:

```bash
arm-none-eabi-objcopy -O binary target/thumbv7m-none-eabi/release/stm32f103-blinky firmware.bin
```

3. STM32CubeProgrammerë¡œ ì—…ë¡œë“œ
4. **ì‹œë¦¬ì–¼ í„°ë¯¸ë„ ì—´ê¸°** (ì˜ˆ: PuTTY, RealTerm, `minicom`, `screen`, `TeraTerm` ë“±)
   - Baudrate: `115200`
   - í¬íŠ¸: CP2102 ì—°ê²°ëœ COM í¬íŠ¸
   - ë©”ì‹œì§€ ì¶œë ¥ í™•ì¸: **"Hello, Rust from STM32!"**

---

## ğŸ§© ì½”ë“œ ì„¤ëª…

| ì½”ë“œ ë¶€ë¶„ | ì˜ë¯¸ |
|-----------|------|
| `gpioa.pa9.into_alternate_push_pull()` | UART TX ì¶œë ¥ í•€ìœ¼ë¡œ ì„¤ì • |
| `Serial::usart1(...)` | USART1 ì¸í„°í˜ì´ìŠ¤ ì´ˆê¸°í™” |
| `.baudrate(115_200.bps())` | í†µì‹  ì†ë„ ì„¤ì • |
| `writeln!(tx, "...")` | ë¬¸ìì—´ ì „ì†¡ (TX ì¶œë ¥) |
| `block!()` | non-blocking í•¨ìˆ˜ ê²°ê³¼ë¥¼ blockingìœ¼ë¡œ ì‹¤í–‰ |

---

## ğŸ’¡ íŒ: ì—¬ëŸ¬ ì¤„ ì¶œë ¥í•˜ë ¤ë©´?

```rust
writeln!(tx, "Line 1").unwrap();
writeln!(tx, "Line 2").unwrap();
```

ë˜ëŠ” ë£¨í”„ë¡œ ë°˜ë³µí•´ì„œ ê³„ì† ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•´ë„ ë¼.

---

## âœ… Day 6 ì •ë¦¬

| í•­ëª© | ê²°ê³¼ |
|------|------|
| USART1 TX(RX) í•€ ì„¤ì • | âœ… PA9 (TX) ì—°ê²° ì™„ë£Œ |
| CP2102 ì—°ê²° í›„ ì¶œë ¥ í™•ì¸ | âœ… ì„±ê³µ (ì‹œë¦¬ì–¼ í„°ë¯¸ë„ë¡œ í™•ì¸ ê°€ëŠ¥) |
| Rustì—ì„œ UART ì‚¬ìš©ë²• ìµí˜ | âœ… `Serial::usart1`, `write!`, `writeln!` ì‚¬ìš© ì™„ë£Œ |

---

## ğŸ”œ Day 7 ì˜ˆê³ : íƒ€ì´ë¨¸ + ì¸í„°ëŸ½íŠ¸

- `TIM2` ì‚¬ìš©í•´ì„œ ì¼ì • ì£¼ê¸°ë¡œ ì¸í„°ëŸ½íŠ¸ ë°œìƒì‹œí‚¤ê¸°
- ì¸í„°ëŸ½íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡
- LED Blinkë¥¼ ì¸í„°ëŸ½íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ë°”ê¿”ë³´ê¸°

---

ì´ì œ ë³´ë“œì™€ **PCê°€ ì†Œí†µì„ ì‹œì‘**í–ˆì–´!  
í˜¹ì‹œ ì‹œë¦¬ì–¼ í†µì‹  ì•ˆ ë˜ë©´ í¬íŠ¸, Baudrate, GND ì—°ê²°, TX/RX í•€ ë°”ë€ ê²ƒ í™•ì¸í•´ë³´ê³  ë°”ë¡œ ì•Œë ¤ì¤˜ ğŸ˜„  
UART ë””ë²„ê·¸ëŠ” Rust ì„ë² ë””ë“œì—ì„œ **ìµœê³ ì˜ ë””ë²„ê¹… ë„êµ¬**ê°€ ë  ê±°ì•¼!